{"ast":null,"code":"var _jsxFileName = \"D:\\\\Personal Project MERN\\\\mern-blog-app\\\\client\\\\src\\\\pages\\\\login\\\\Login.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useContext, useRef, useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Context } from \"../../context/Context\";\nimport \"./login.css\";\nimport { bcrypt } from 'crypto';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n\n  const userRef = useRef();\n  const passwordRef = useRef();\n  const {\n    dispatch,\n    isFetching\n  } = useContext(Context);\n  const [error, setError] = useState(false);\n  const [user, setUser] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [validation, setValidation] = useState({\n    username: \"\",\n    password: \"\"\n  });\n\n  const handleChange = e => {\n    setUser({ ...user,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const checkValidation = async (req, res) => {\n    let errors = JSON.parse(JSON.stringify(validation));\n    const user = await user.findOne({\n      username: req.body.username\n    });\n\n    if (!user) {\n      errors = true;\n      return res.status(400).json(alert(\"Username Is not valid\"));\n    }\n\n    const validated = await bcrypt.compare(req.body.password, user.password);\n\n    if (!validated) {\n      errors = true;\n      return res.status(400).json(alert(\"Password does not Match\"));\n    } //first Name validation\n\n\n    const username = user.username;\n\n    if (!user.username.trim()) {\n      errors.username = \"Username is required\";\n    } else if (username.length < 4) {\n      errors.username = \"Username must be longer than 4  characters\";\n    } else if (username === validation.username) {\n      errors.username = \"Username does not match\";\n    } else {\n      errors.username = \"\";\n    } //password validation\n\n\n    const password = user.password;\n\n    if (!password) {\n      errors.password = \"Password is required\";\n    } else {\n      errors.password = \"\";\n    }\n\n    setValidation(errors);\n  };\n\n  useEffect(() => {\n    checkValidation();\n  }, [user]);\n\n  const handleSubmit = async (e, req) => {\n    e.preventDefault();\n    dispatch({\n      type: \"LOGIN_START\"\n    });\n\n    try {\n      const res = await axios.post(\"/auth/login\", {\n        username: userRef.current.value,\n        password: passwordRef.current.value,\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: user.username,\n          password: user.password\n        })\n      });\n      dispatch({\n        type: \"LOGIN_SUCCESS\",\n        payload: res.data\n      });\n      alert(\"User Logged in Successfully\");\n    } catch (err) {\n      dispatch({\n        type: \"LOGIN_FAILURE\"\n      });\n      setError(true);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login\",\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"loginTitle\",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loginForm-BG\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"loginForm\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"loginInput\",\n          placeholder: \"Enter your username...\",\n          ref: userRef,\n          onChange: e => handleChange(e),\n          value: user.username,\n          name: \"username\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 9\n        }, this), validation.username && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"red\",\n            paddingLeft: \"10px\",\n            fontSize: \"18px\",\n            marginTop: \"10px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: validation.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 117\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 36\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: \"loginInput\",\n          placeholder: \"Enter your password...\",\n          ref: passwordRef,\n          onChange: e => handleChange(e),\n          value: user.password,\n          name: \"password\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 9\n        }, this), validation.password && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"red\",\n            paddingLeft: \"10px\",\n            fontSize: \"18px\",\n            marginTop: \"10px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: validation.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 121\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 40\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"loginButton\",\n          type: \"submit\",\n          disabled: isFetching,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 9\n        }, this), error && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"rgb(255, 0, 0)\",\n            fontSize: \"20px\",\n            marginTop: \"10px\"\n          },\n          children: \"Invalid Credentials\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"loginRegisterButton\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        className: \"link\",\n        to: \"/register\",\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"MnDGxP4wyOHoNsSIf99R09yU7HU=\");\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["D:/Personal Project MERN/mern-blog-app/client/src/pages/login/Login.jsx"],"names":["axios","useContext","useRef","useEffect","useState","Link","Context","bcrypt","Login","userRef","passwordRef","dispatch","isFetching","error","setError","user","setUser","username","password","validation","setValidation","handleChange","e","target","name","value","checkValidation","req","res","errors","JSON","parse","stringify","findOne","body","status","json","alert","validated","compare","trim","length","handleSubmit","preventDefault","type","post","current","headers","payload","data","err","color","paddingLeft","fontSize","marginTop"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useContext, useRef, useEffect,useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Context } from \"../../context/Context\";\nimport \"./login.css\";\nimport { bcrypt } from 'crypto'\n\nexport default function Login() {\n  const userRef = useRef();\n  const passwordRef = useRef();\n  const { dispatch, isFetching } = useContext(Context);\n  const [error, setError] = useState(false);\n\n\n  const [user, setUser] = useState({\n    username: \"\",\n   \n    \n    password: \"\",\n  });\n\n  const [validation, setValidation] = useState({\n    username: \"\",\n    \n  \n    password: \"\",\n    \n  });\n\n  const handleChange =(e) => {\n    setUser({...user, [e.target.name]: e.target.value})\n  }\n  \n\n  const checkValidation = async (req,res) => {\n    let errors = JSON.parse(JSON.stringify(validation));\n    \n\n    const user = await user.findOne({ username: req.body.username });\n    if(!user) {\n      errors = true;\n      return res.status(400).json(alert(\"Username Is not valid\"));\n    } \n\n    const validated = await bcrypt.compare(req.body.password, user.password);\n    if(!validated) {\n      errors = true;\n      return res.status(400).json(alert(\"Password does not Match\"));\n  } \n\n\n    //first Name validation\n    const username = user.username;\n    if (!user.username.trim()) {\n      errors.username = \"Username is required\";\n    } else if (username.length < 4) {\n      errors.username = \"Username must be longer than 4  characters\";\n    }\n    else if (username === validation.username) {\n      errors.username = \"Username does not match\";\n    }else {\n      errors.username = \"\";\n    }\n\n    \n\n   //password validation\n \n   const password = user.password;\n   if (!password) {\n     errors.password = \"Password is required\";\n   } else {\n     errors.password = \"\";\n   }\n\n  \n\n   setValidation(errors);\n };\n\n useEffect(() => {\n  checkValidation();\n}, [user]);\n\n\n  const handleSubmit = async (e,req) => {\n    e.preventDefault();\n    dispatch({ type: \"LOGIN_START\" });\n    try {\n      const res = await axios.post(\"/auth/login\", {\n        username: userRef.current.value,\n        password: passwordRef.current.value,\n        \n        headers: {\n          'Content-Type': 'application/json'\n           },\n           body : JSON.stringify({username:user.username,password:user.password })\n        \n        \n      })\n     \n      dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\n      alert(\"User Logged in Successfully\");\n    } catch (err) {\n      dispatch({ type: \"LOGIN_FAILURE\" });\n      setError(true);\n   \n    }\n  };\n\n  return (\n    <div className=\"login\">\n      <span className=\"loginTitle\">Login</span>\n      <div className=\"loginForm-BG\">\n      <form className=\"loginForm\" onSubmit={handleSubmit}>\n        <label>Username</label>\n        <input\n          type=\"text\"\n          className=\"loginInput\"\n          placeholder=\"Enter your username...\"\n          ref={userRef}\n          onChange={(e) => handleChange(e)}\n          value={user.username} \n          name=\"username\"\n          required\n        />\n          {validation.username &&  <span style={{color:\"red\",paddingLeft:\"10px\",fontSize:\"18px\", marginTop:\"10px\"}}><p>{validation.username}</p></span>}\n        <label>Password</label>\n        <input\n          type=\"password\"\n          className=\"loginInput\"\n          placeholder=\"Enter your password...\"\n          ref={passwordRef}\n          onChange={(e) => handleChange(e)}\n          value={user.password}\n          name=\"password\"\n              required\n\n        />\n              {validation.password &&  <span style={{color:\"red\",paddingLeft:\"10px\",fontSize:\"18px\", marginTop:\"10px\"}}><p>{validation.password}</p></span> }\n\n        <button className=\"loginButton\" type=\"submit\" disabled={isFetching}>\n          Login\n        </button>\n        {error && <span style={{color:\"rgb(255, 0, 0)\",fontSize:\"20px\", marginTop:\"10px\"}}>Invalid Credentials</span>}\n      </form>\n      </div>\n      <button className=\"loginRegisterButton\">\n        <Link className=\"link\" to=\"/register\">\n          Register\n        </Link>\n      </button>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}